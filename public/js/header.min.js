var header_controller=header_controller||{};(header_controller={init:function(){var e;for(e in this)if(this.hasOwnProperty(e)){var t=this[e];void 0!==t.init&&t.init()}}}).searchBox={selector:$(".siteHeader-searchToggle"),init:function(){this.selector.on("click",(function(e){var t=$(this),s=$(".grid-search-wrapper"),a=$(".site-lang-wrapper"),o=$(".siteHeader-searchToggle .toggle-close");s.toggleClass("show"),s.hasClass("show")?(t.attr("aria-expanded","true"),o.addClass("show")):(t.attr("aria-expanded","false"),o.removeClass("show")),a.hasClass("show")&&a.removeClass("show").attr("aria-expanded","false"),document.activeElement!==$("input.gsc-input").first()[0]&&$("input.gsc-input").focus().attr("type","search")})).on("focus",(function(e){$(this).attr("aria-expanded",!1),$("svg",this).removeAttr("aria-expanded")})),$(".siteHeader-searchToggle svg").removeAttr("aria-expanded"),$(".siteHeader-searchToggle .toggle-close").click((function(e){return e.stopPropagation(),e.preventDefault(),!1}))}},header_controller.searchDesktop={selector:$(".grid-search"),init:function(){this.selector.on("DOMNodeInserted",(function(e){if($(e.target).hasClass("gsc-input")&&$(e.target).is("input")){console.log("DOMNodeInserted");var t=$(e.target),s=$(".site-lang-wrapper"),a=$(".grid-search-wrapper");"fr-CA"===document.documentElement.lang?t.attr("aria-label","Rechercher Vision Mondiale"):t.attr("aria-label","Search World Vision"),t.on("focus",(function(){s.hasClass("show")&&($(".site-lang").attr("aria-expanded","false"),s.removeClass("show"),$(".toggle-close").addClass("show"))})),t.on("blur",(function(){a.hasClass("show")&&($(".siteHeader-searchToggle svg").attr("aria-expanded","false"),a.removeClass("show"),$(".toggle-close").removeClass("show")),$(".siteHeader-searchToggle").css("pointer-events","none"),setTimeout((function(){$(".siteHeader-searchToggle").css("pointer-events","")}),500)}))}})),$("#gsc-i-id1").on("focus",(function(){$(".toggle-close").toggleClass("show")}))}},header_controller.langBox={selector:$(".site-lang-wrapper"),init:function(){this.selector.on("keypress click",(function(e){var t=$(this),s=$(".grid-search-wrapper"),a=$(".siteHeader-searchToggle");13!==e.which&&"click"!==e.type||(t.toggleClass("show"),window.navigator.userAgent.indexOf("Trident")>0&&e.target.classList.contains("site-lang-wrapper")&&e.preventDefault(),t.hasClass("show")?t.attr("aria-expanded","true"):t.attr("aria-expanded","false"),s.hasClass("show")&&(s.removeClass("show"),a.attr("aria-expanded","false")))})),$(".lang-selector-container a:last-child").on("blur",(function(){header_controller.langBox.selector.removeClass("show").attr("aria-expanded","false")}))}};var selector_headerOverlay="header .main-overlay";header_controller.nav={selector:$(".siteHeader-hamburger"),init:function(){this.selector.on("click",(function(){var e=$(".main-nav"),t=$(selector_headerOverlay),s=$(".siteHeader-nav"),a=$("#btnCloseMwvMenu");e.attr("data-open-by","mobile"),e.toggleClass("nav-visible"),t.toggleClass("show"),s.animate({left:"0"},1e3).addClass("show"),a.removeClass("hide-nav"),$(".siteHeader-navItem,#btnCloseMwvMenu",s)[0].focus()}));var e=$(".siteHeader-nav"),t=$(".siteHeader-navItem,#btnCloseMwvMenu",e),s=t[0];t[t.length-1];$("#btnCloseMwvMenu").focus((function(){$(this).css("outline","2px solid #7BB2CE")})).blur((function(){$(this).css("outline","none")})).on("keydown",(function(e){13!==e.keyCode&&32!==e.keyCode||($(this).click(),$(".siteHeader-hamburger").off("keydown"))})),e.on("keydown",(function(e){var t=1==$(".nav-visible").length;if(9===e.keyCode&&t)if(e.shiftKey)document.activeElement===s[0]&&(e.preventDefault(),$(".siteHeader-navItem").last()[0].focus()),document.activeElement===$("#btnMwvLogin-Mobile")[0]&&(e.preventDefault(),$("#btnCloseMwvMenu")[0].focus()),document.activeElement===$("#btnCloseMwvMenu")[0]&&(e.preventDefault(),$(".siteHeader-navItem").last()[0].focus()),document.activeElement===$(".siteHeader-navItem").first()[0]&&(e.preventDefault(),$("#btnMwvLogin-Mobile")[0].focus());else{if(document.activeElement===$("#btnCloseMwvMenu")[0])return e.preventDefault(),console.log("MWV login"),void $("#btnMwvLogin-Mobile")[0].focus();if(document.activeElement===$(".siteHeader-navItem").last()[0])return e.preventDefault(),void $("#btnCloseMwvMenu")[0].focus();if(document.activeElement===$("#btnMwvLogin-Mobile")[0])return e.preventDefault(),void $(".newSiteHeader .newSiteHeader-item1").first()[0].focus()}27===e.keyCode&&$("#btnCloseMwvMenu").click()})),$(window).on("keydown",(function(e){document.activeElement===$(".siteHeader-hamburger").first()[0]&&(13!==e.keyCode&&32!==e.keyCode||$(".siteHeader-hamburger").first().click()),document.activeElement===$(".siteHeader-searchToggle").first()[0]&&(13!==e.keyCode&&32!==e.keyCode||$(".siteHeader-searchToggle").first().click()),document.activeElement===$("#chatLaunchButton")[0]&&(13!==e.keyCode&&32!==e.keyCode||$("#chatLaunchButton").click())})),$("#chatLaunchButton").focus((function(){$(this).css("outline","2px solid #7BB2CE").css("outline-offset","2px")})).blur((function(){$(this).css("outline","none")})),$(".siteHeader-hamburger,.siteHeader-searchToggle.u-hide-desktop,.siteHeader-basket.siteHeader-top-button,.site-lang.siteHeader-topItem").focus((function(){$(this).css("outline","2px solid #7BB2CE").css("outline-offset","5px")})).blur((function(){$(this).css("outline","none")})),$(".siteHeader-logo").parent().focus((function(){$(this).css("outline","2px solid #7BB2CE"),$(".siteHeader-logo").css("outline","2px solid #7BB2CE")})).blur((function(){$(this).css("outline","none"),$(".siteHeader-logo").css("outline","none")}))}},header_controller.desktopNav={selector:$(".siteHeader-desktopHamburger"),init:function(){this.selector.on("keypress click",(function(e){if(13===e.which||"click"===e.type){var t=$(".main-nav"),s=$(selector_headerOverlay),a=$(".nav-sub-menu .menu-collapse .side-nav"),o=$(".siteHeader-navExtra");t.attr("data-open-by","desktop"),a.removeClass("hidden"),$(".sub-menu-bottom").removeClass("u-hide"),t.toggleClass("nav-visible"),s.toggleClass("show"),o.animate({left:"0"},{duration:1e3,complete:function(){}}).addClass("show"),13===e.which&&$(".nav-sub-menu .menu-collapse .side-nav > ul > li:first-child > a").focus()}}))}},header_controller.mobileNav={selector:$("header.siteHeader span.siteHeader-navItem.menu-title"),init:function(){this.selector.on("click",(function(){var e=$(this),t=$(".main-nav");$(".sidenav-container .side-nav"),$(".nav-sub-menu .menu-collapse .side-nav"),$(".nav-sub-menu .menu-collapse");"mobile"===t.attr("data-open-by")&&($(".sub-menu-bottom").toggleClass("u-hide"),$("#sidenav").toggleClass("hidden"),e.toggleClass("collapsed"))}))}},header_controller.close={selector:$(".wrapper-close, .wrapper-close.siteHeader-close, .main-overlay, #btnMwvLogin-Mobile"),init:function(){this.selector.on("click",(function(){$(this);var e=$(".main-nav"),t=$(".siteHeader-nav"),s=$(".siteHeader-navExtra"),a=$(selector_headerOverlay),o=$(".sub-menu-bottom"),n=$(".nav-sub-menu .menu-title"),i=$("#btnCloseMwvMenu");"mobile"===e.attr("data-open-by")?e.hasClass("nav-visible")&&t.animate({left:"-90vw"},{duration:1e3,complete:function(){t.removeClass("show"),e.removeClass("nav-visible"),a.removeClass("show"),o.addClass("u-hide"),n.addClass("collapsed"),i.addClass("hide-nav")}}):"desktop"===e.attr("data-open-by")&&e.hasClass("nav-visible")&&s.animate({left:"-350px"},{duration:1e3,complete:function(){s.removeClass("show"),e.removeClass("nav-visible"),a.removeClass("show"),n.removeClass("collapsed")}})}))}},header_controller.accordion={selector:$(".nav-sub-menu .side-nav span"),init:function(){this.selector.on("click",(function(){var e=$(".main-nav"),t=$(".siteHeader-nav");e.hasClass("nav-visible")&&(t.removeClass("show"),e.removeClass("nav-visible"))}))}},header_controller.closeDesktopNav={selector:$(".wrapper-close, .wrapper-close.siteHeader-close"),init:function(){this.selector.on("keydown",(function(e){$(this);var t=$(".main-nav"),s=$(".siteHeader-navExtra"),a=$(selector_headerOverlay);"desktop"===t.attr("data-open-by")&&t.hasClass("nav-visible")&&13==e.which&&s.animate({left:"-350px"},{duration:1e3,complete:function(){s.removeClass("show"),t.removeClass("nav-visible"),a.removeClass("show"),$(".siteHeader-desktopHamburger").focus()}})}))}},header_controller.mwvNavBarAccessibility={init:function(){var e=".nav-sub-menu .menu-collapse .side-nav > ul > li:first-child > a",t=".wrapper-close, .wrapper-close.siteHeader-close";$(e).on("keydown",(function(e){9==e.which&&e.shiftKey&&(e.preventDefault(),$(t).focus())})),$(t).on("keydown",(function(t){9==t.which&&(t.shiftKey?($(".nav-sub-menu .menu-collapse .side-nav > ul > li:last-child > a").focus(),t.preventDefault()):(t.preventDefault(),$(e).focus()))}))}},header_controller.globalEscKeyHandler={init:function(){document.onkeydown=function(e){if(evt=e||window.event,27==evt.keyCode){var t=$(".main-nav"),s=$(".siteHeader-navExtra"),a=$(selector_headerOverlay);"desktop"===t.attr("data-open-by")&&t.hasClass("nav-visible")&&s.animate({left:"-350px"},{duration:1e3,complete:function(){s.removeClass("show"),t.removeClass("nav-visible"),a.removeClass("show"),$(".siteHeader-desktopHamburger").focus()}})}}}},header_controller.langToggleLoseFocused={selector:".grid-search",init:function(){$(this.selector).on("DOMNodeInserted",(function(e){$(e.target).hasClass("gsc-input")&&$(e.target).is("input")&&($(e.target).on("focus",(function(e){$(".site-lang-wrapper").attr("aria-expanded","false"),$(".site-lang-wrapper").removeClass("show")})),$("input.gsc-input").on("keydown",(function(e){13==(e.which||e.keyCode)&&(window.location.href=window.location.protocol+"//"+window.location.host+"/search?q="+$("input.gsc-input").val())})))}))}};