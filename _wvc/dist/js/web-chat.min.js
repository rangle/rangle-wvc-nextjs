var web_chat_controller=web_chat_controller||{};function showChat(){var e=$(".web-chat"),t=checkBrowser();e.hasClass("u-hide")&&!t&&e.removeClass("u-hide"),$("#chatLaunchButton").on("click",(function(){openIframe()}))}function setIframeSrc(){$("#webChatPopup").attr("src","https://stg-livechat.worldvision.ca")}function iframeMedia(){var e=["(max-width: 768px)","(max-width: 1023px) and (min-width: 768px)","(min-width: 1024px)"];function t(e){e.matches&&postMessage({breakpoint:e.media})}for(var n=0;n<e.length;n++){var a=e[n],o=window.matchMedia(a);o.matches&&t(o),o.addListener(t)}}function closeIframe(){var e=$(".u-wrapper-close"),t=$("#webChatPopup"),n=$("#inputBlocker");$(".launch-btn").removeClass("u-fade"),e.addClass("u-fade"),t.css("z-index",-9999).addClass("u-fade"),n.addClass("u-fade"),$("body").removeClass("body-scroll-lock"),setTimeout((function(){$("#chatLaunchButton").focus()}),100)}function openIframe(){var e=$(".u-wrapper-close"),t=$("#webChatPopup"),n=$("#inputBlocker"),a=$(".launch-btn");postMessage({action:"openClicked"}),a.addClass("u-fade"),e.removeClass("u-fade"),t.css("z-index",9999).removeClass("u-fade"),n.removeClass("u-fade"),$("body").addClass("body-scroll-lock")}function postMessage(e){var t=window.document.getElementById("webChatPopup").contentWindow;t&&t.postMessage(e,"*")}function checkBrowser(){var e=function(e){return e.test(window.navigator.userAgent)},t=e(/trident/i),n=e(/edg/i);return t&&!n}(web_chat_controller={init:function(){var e;for(e in this)if(this.hasOwnProperty(e)){var t=this[e];void 0!==t.init&&t.init()}}}).hideChat={selector:$(".u-wrapper-close"),init:function(){this.selector.on("click",(function(){closeIframe()}))}},web_chat_controller.onLoad={init:function(){window.onload=function(){setIframeSrc(),window.addEventListener("message",(function(e){("closeClicked"===e.data&&closeIframe(),"sessionActive"===e.data&&openIframe(),"initialRenderComplete"===e.data&&(iframeMedia(),showChat()),"getResolution"===e.data)&&postMessage({windowResolution:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)+"w x"+Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)+"h"})}),!1)}}};